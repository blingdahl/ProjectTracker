<!DOCTYPE html>
<div class="message"></div>
<div class="error"></div>
<div class="rpcMessages"></div>
<a class="clearCompleted">Clear completed</a>
<div class="controls">
  <div class="global" style="display: none" data-spreadsheet-url="<?= spreadsheetUrl ?>"></div>
  <table>
    <?
      for (var i = 0; i < trackedSheets.length; i++) {
        var sheetInfo = trackedSheets[i];
    ?>
    <tr class="sheetController"
        data-sheet-id="<?= sheetInfo.sheetId ?>"
        data-sheet-name="<?= sheetInfo.sheetName ?>"
        data-label-name="<?= sheetInfo.labelName || '' ?>"
        data-max-threads="<?= sheetInfo.maxThreads ?>"
        data-search-query="<?= sheetInfo.searchQuery || '' ?>">
      <td><a href="<?= spreadsheetUrl ?>#gid=<?= sheetInfo.sheetId ?>" target="_new"><?= sheetInfo.sheetName ?></a></td>
      <td>
        <div class="labelPicker">
          <div class="labelDisplayMode">
            <span class="labelName"></span>
          </div>
          <div class="labelSelectMode">
            <select class="selectLabel">
            </select>
            <input type="text" class="maxThreads">
            <a class="saveLabel">Save</a>
            <a class="cancelLabel">Cancel</a>
            <a class="removeLabel">Remove</a>
            <a class="renameLabel">Rename</a>
          </div>
        </div>
      </td>
      <td>
        <a class="syncWithGmail labelOnly">Sync</a>
        <a class="organize nonLabelOnly">Organize</a>
      </td>
      <td>
        <a class="addUrl">Add URL</a>
      </td>
      <td>
        <a class="search labelOnly">Search</a>
      </td>
    </tr>
    <?
      }
    ?>
  </table>
  <?
    if (untrackedSheets.length > 0) {
  ?>
  <h1>Untracked</h1>
  <table>
    <?
      for (var i = 0; i < untrackedSheets.length; i++) {
        var sheetInfo = untrackedSheets[i];
    ?>
    <tr class="sheetController"
        data-sheet-id="<?= sheetInfo.sheetId ?>"
        data-sheet-name="<?= sheetInfo.sheetName ?>">
      <td><?= sheetInfo.sheetName ?></td>
      <td><a class="addTracking">Track</a></td>
    </tr>
    <?
      }
    ?>
  </table>
  <?
    }
  ?>
  <h1>All Sheets</h1>
  <button class="doAllTheThings">Do all the things!</button>
  <button class="tidyAll">Tidy all</button>
  <button class="showOverview">Show Overview</button>
  <script>
    <?!= include("ui/JavascriptRpcConfig"); ?>
    <?!= include("ui/JavascriptLabelPicker"); ?>
    <?!= include("ui/JavascriptSheetController"); ?>
    <?!= include("ui/JavascriptGlobalController"); ?>
    <?!= include("ui/JavascriptOverviewController"); ?>
    <?!= include("ui/JavascriptControls"); ?>
  </script>
  
  <div class="overviewTemplate" style="display: none">
    <a class="hideOverview">Hide overview</a><br>
    <table class="overviewTable">
      <tr>
        <th>Sheet</th>
        <th>Priority</th>
        <th>Email</th>
        <th>Link</th>
        <th>Item</th>
        <th>Action</th>
      </tr>
      <tr class="overviewRowTemplate overviewRow">
        <td class="sheet"></td>
        <td class="priority"></td>
        <td class="email"></td>
        <td class="link"></td>
        <td class="item"></td>
        <td class="action">
          <a class="markCompleted" style="display: none">Mark complete</a>
        </td>
      </tr>
    </table>
    <a class="loadPriority"></a>
    <div class="priorityLoading">
    <div id="floatingBarsG">
      <div class="blockG" id="rotateG_01"></div>
      <div class="blockG" id="rotateG_02"></div>
      <div class="blockG" id="rotateG_03"></div>
      <div class="blockG" id="rotateG_04"></div>
      <div class="blockG" id="rotateG_05"></div>
      <div class="blockG" id="rotateG_06"></div>
      <div class="blockG" id="rotateG_07"></div>
      <div class="blockG" id="rotateG_08"></div>
  </div>
    </div>
  </div>
</div>
<div class="overviewPlaceholder"></div>
