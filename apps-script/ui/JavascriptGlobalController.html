class GlobalController {

  // SECTION:
  // Elements
  
  static getSyncAllWithGmailElement() {
    return $('.syncAllWithGmail');
  }
  
  static getOrganizeAllElement() {
    return $('.organizeAll');
  }
  
  static getUpdateOverviewElement() {
    return $('.updateOverview');
  }
  
  static getRerenderSidebarElement() {
    return $('.rerenderSidebar');
  }
  
  static getRerenderWebAppElement() {
    return $('.rerenderWebApp');
  }
  
  // SECTION:
  // Attributes
  
  static getSpreadsheetUrl() {
    return $('.global').attr('data-spreadsheet-url');
  }

  // SECTION:
  // Click handlers
  
  static organizeAllClicked() {
    new RpcConfig(runner => runner.organizeAll(GlobalController.getSpreadsheetUrl())).
        output('Organizing all...').
        retryOnTimeout().
        callRpc();
  }

  static updateOverviewClicked() {
    new RpcConfig(runner => runner.updateOverview(GlobalController.getSpreadsheetUrl())).
        output('Updating overview...').
        retryOnTimeout().
        callRpc();
  }
  
  static rerenderSidebarClicked() {
    new RpcConfig(runner => runner.showPreferencesSidebar(GlobalController.getSpreadsheetUrl())).output('Rerendering sidebar...').callRpc();
  }

  static addListeners() {
    GlobalController.getOrganizeAllElement().click(GlobalController.organizeAllClicked);
    GlobalController.getUpdateOverviewElement().click(GlobalController.updateOverviewClicked);
    GlobalController.getRerenderSidebarElement().click(GlobalController.rerenderSidebarClicked);
  }
  
  static init() {
    GlobalController.addListeners();
  }
}
