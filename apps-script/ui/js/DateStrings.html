class DateStrings {

  static toDateStr(d) {
    let monthStr = String(d.getMonth() + 1);
    if (monthStr.length === 1) {
      monthStr = '0' + monthStr;
    }
    let dayStr = String(d.getDate());
    if (dayStr.length === 1) {
      dayStr = '0' + dayStr;
    }
    return (d.getYear() + 1900) + '/' + monthStr + '/' + dayStr;
  }

  static todayDate() {
    if (!DateStrings.TODAY_DATE) {
      DateStrings.TODAY_DATE = new Date();
    }
    return new Date(DateStrings.TODAY_DATE);
  }

  static yesterday(opt_ignoreCache) {
    if (opt_ignoreCache) {
      let d = DateStrings.todayDate();
      d.setDate(d.getDate() - 1);
      return DateStrings.toDateStr(d);
    }
    if (!DateStrings.YESTERDAY) {
      DateStrings.YESTERDAY = DateStrings.yesterday(true);
    }
    return DateStrings.YESTERDAY;
  }

  static today(opt_ignoreCache) {
    if (opt_ignoreCache) {
      return DateStrings.toDateStr(DateStrings.todayDate());
    }
    if (!DateStrings.TODAY) {
      DateStrings.TODAY = DateStrings.today(true);
    }
    return DateStrings.TODAY;
  }

  static tomorrow(opt_ignoreCache) {
    if (opt_ignoreCache) {
      let d = DateStrings.todayDate();
      d.setDate(d.getDate() + 1);
      return DateStrings.toDateStr(d);
    }
    if (!DateStrings.TOMORROW) {
      DateStrings.TOMORROW = DateStrings.tomorrow(true);
    }
    return DateStrings.TOMORROW;
  }

  static nextDateForDay(d, dayOfWeek) {
    for (let i = 0; i != 7; i++) {
      d.setDate(d.getDate() + 1);
      if (d.getDay() === dayOfWeek) {
        return d;
      }
    }
    return null;
  }

  static thisWeekend(opt_ignoreCache) {
    if (opt_ignoreCache) {
      return DateStrings.toDateStr(
          DateStrings.nextDateForDay(DateStrings.todayDate(), DateStrings.SATURDAY));
    }
    if (!DateStrings.THIS_WEEKEND) {
      DateStrings.THIS_WEEKEND = DateStrings.thisWeekend(true);
    }
    return DateStrings.THIS_WEEKEND;
  }

  static nextWeek(opt_ignoreCache) {
    if (opt_ignoreCache) {
      return DateStrings.toDateStr(
          DateStrings.nextDateForDay(DateStrings.todayDate(), DateStrings.MONDAY));
    }
    if (!DateStrings.NEXT_WEEK) {
      DateStrings.NEXT_WEEK = DateStrings.nextWeek(true);
    }
    return DateStrings.NEXT_WEEK;
  }

  static nextMonth(opt_ignoreCache) {
    if (opt_ignoreCache) {
      let d = DateStrings.todayDate();
      for (let i = 0; i != 31; i++) {
        d.setDate(d.getDate() + 1);
        if (d.getDate() === 1) {
          return DateStrings.toDateStr(d);
        }
      }
      return null;
    }
    if (!DateStrings.NEXT_MONTH) {
      DateStrings.NEXT_MONTH = DateStrings.nextMonth(true);
    }
    return DateStrings.NEXT_MONTH;
  }

  static stringFor(dateStr) {
    if (dateStr == DateStrings.yesterday()) {
      return 'Yesterday';
    }
    if (dateStr == DateStrings.today()) {
      return 'Today';
    }
    if (dateStr == DateStrings.tomorrow()) {
      return 'Tomorrow';
    }
    if (dateStr == DateStrings.thisWeekend()) {
      return 'This Weekend';
    }
    if (dateStr == DateStrings.nextWeek()) {
      return 'Next Week';
    }
    if (dateStr == DateStrings.nextMonth()) {
      return 'Next Month';
    }
    return dateStr;
  }
}

DateStrings.SUNDAY = 0;
DateStrings.MONDAY = 1;
DateStrings.TUESDAY = 2;
DateStrings.WEDNESDAY = 3;
DateStrings.THURSDAY = 4;
DateStrings.FRIDAY = 5;
DateStrings.SATURDAY = 6;
