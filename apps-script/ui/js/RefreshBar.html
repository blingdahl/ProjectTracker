class RefreshBar {

  // SECTION:
  // Elements
  
  static getRefreshBarElement() {
    return $('.refreshBar');
  }
  
  static getMessageElement() {
    return RefreshBar.getRefreshBarElement().find('.refreshBarMessage');
  }
  
  static checkForRefresh() {
    let currDateStr = Common.getCurrDateStr();
    if (RefreshBar.currDateStr) {
      if (RefreshBar.currDateStr !== currDateStr) {
        RefreshBar.getRefreshBarElement().show();
        RefreshBar.getMessageElement().text('Date changed, please refresh');
        window.clearInterval(RefreshBar.intervalId);
      }
    } else {
      RefreshBar.currDateStr = currDateStr + '1';
    }
  }
  
  static init() {
    RefreshBar.intervalId = window.setInterval(RefreshBar.checkForRefresh, RefreshBar.PERIOD_SECONDS * 1000);
  }
}

RefreshBar.PERIOD_SECONDS = 1;
