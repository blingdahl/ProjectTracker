class DatePicker {
  constructor(sheetIdCallback, uuidCallback, textCssClass, emptyContent, textCallback, valueCallback, changeCallback, inputMaker) {
    this.editableTextMaker = new EditableTextMaker(
            /* sheetIdCallback */ sheetIdCallback,
            /* uuidCallback */ uuidCallback,
            /* textCssClass */ textCssClass,
            /* emptyTextContent */ emptyContent,
            /* textCallback */ textCallback,
            /* valueCallback */ valueCallback,
            /* changeCallback */ changeCallback,
            /* inputMaker */
            new OptionInputMaker(
                DatePicker.getDateOptions(),
                'None',
                new DateInputMaker()));
  }

  // Called once per table load
  attachClickHandler(ancestorJq) {
    this.editableTextMaker.attachClickHandler(ancestorJq);
  }

  makeElement(data) {
    return this.editableTextMaker.makeElement(data);
  }

  static makeDateOption(extDate) {
    return {'text': extDate.toFriendlyString(), 'value': extDate.toString()};
  }

  static getDateOptions() {
    let dateOptions = [];
    dateOptions.push(DatePicker.makeDateOption(Dates.TODAY));
    dateOptions.push(DatePicker.makeDateOption(Dates.TOMORROW));
    dateOptions.push(DatePicker.makeDateOption(Dates.WEEKEND));
    dateOptions.push(DatePicker.makeDateOption(Dates.NEXT_WEEK));
    dateOptions.push(DatePicker.makeDateOption(Dates.NEXT_MONTH));
    dateOptions.push({'text': 'Clear', 'value': ''});
    return dateOptions;
  }
}
